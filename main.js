(()=>{"use strict";var e,t,n=function(e,t){var n=e+Math.random()*(t+1-e);return Math.floor(n)},r=document.querySelector(".form"),o=r.querySelector(".form__btn-submit"),c=r.querySelector(".form__error"),a=Array.from(r.querySelectorAll(".form__input")),i=r.querySelector(".form__text-block"),u=r.querySelector(".form__check .form__input"),l=document.querySelector(".form__check"),s=l.querySelector(".form__check-image"),m=function(e){var n=e.some((function(e){return!e.validity.valid})),r=+u.value!==t;return n||r},f=function(){if(e){var r=s.getContext("2d"),c={result:(u=n(1,12))+(l=n(1,12)),text:"".concat(u," + ").concat(l," =")},i=c.text;t=c.result,function(e,t,r,o){e.clearRect(0,0,t,r),e.fillStyle="#F2F2F2",e.fillRect(0,0,t,80),e.lineWidth=1.5,e.beginPath(),e.strokeStyle="#777";for(var c=1;c<=7;c++)e.moveTo(0,10*c+n(1,10)),e.lineTo(t,10*c-n(1,10*c)),e.stroke();e.font="40px serif",e.textBaseline="top";var a=(t-e.measureText(o).width)/2;e.rotate(Math.PI/30),e.strokeText(o,a,9),e.rotate(-Math.PI/30)}(r,s.width,s.height,i),o.disabled=m(a)}var u,l},_=function(){a.forEach((function(e){e.value=""})),i.value="",f()};(e=s.getContext)||l.classList.add("form__check_hidden"),o.addEventListener("click",(function(e){e.preventDefault();var t={company:r.querySelector("#input-company").value||"",name:r.querySelector("#input-name").value||"",phone:r.querySelector("#input-phone").value||"",email:r.querySelector("#input-email").value||"",comment:r.querySelector("#text-block").value||"_"},n=JSON.stringify({reg_users:{Company_Reg_Users:t.company,FIO_Reg_Users:t.name,Phone_Reg_Users:t.phone,Email_Reg_Users:t.email,Comment_Reg_Users:t.comment}});fetch("http://page.smartdocument.ru/api/reg_users/",{method:"POST",headers:{"Content-Type":"application/json"},body:n}).then((function(e){return e.json()})).then((function(e){c.textContent="Ваша заявка успешно отправлена",_()})).catch((function(e){console.log(e),c.textContent="Что-то пошло не так..."}))})),a.forEach((function(e){e.addEventListener("input",(function(){o.disabled=m(a)})),e.addEventListener("click",(function(){c.textContent=""}))})),s.addEventListener("click",f),_()})();